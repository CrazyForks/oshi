<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/Performance.md at 2024-09-16
 | Rendered using Apache Maven Fluido Skin 1.12.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Operating System and Hardware Information &#x2013; OSHI Performance Considerations</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.12.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.12.0.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">User guide <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="Overview">Overview</a></li>
            <li><a href="oshi-core-java11/apidocs/" title="Javadocs">Javadocs</a></li>
            <li><a href="FAQ.html" title="Frequently Asked Questions">Frequently Asked Questions</a></li>
            <li><a title="Performance Considerations">Performance Considerations</a></li>
            <li><a href="Upgrading.html" title="Major Version Breaking Changes">Major Version Breaking Changes</a></li>
            <li><a href="SampleOutput.html" title="Sample Output">Sample Output</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">GitHub <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="https://github.com/oshi/oshi" title="OSHI on GitHub">OSHI on GitHub</a></li>
            <li><a href="https://github.com/oshi/oshi/issues" title="Issues">Issues</a></li>
            <li><a href="https://github.com/oshi/oshi/releases" title="Releases">Releases</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                  <li><a href="dependency-info.html" title="Maven Coordinates">Maven Coordinates</a></li>
                  <li><a href="distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="index.html" title="About">About</a></li>
                  <li><a href="issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="modules.html" title="Project Modules">Project Modules</a></li>
                  <li><a href="plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="summary.html" title="Summary">Summary</a></li>
                  <li><a href="team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="changelog.html" title="Change Log">Change Log</a></li>
                  <li><a href="file-activity.html" title="File Activity">File Activity</a></li>
                  <li><a href="dev-activity.html" title="Developer Activity">Developer Activity</a></li>
                  <li><a href="checkstyle-aggregate.html" title="Checkstyle">Checkstyle</a></li>
                  <li><a href="xref/index.html" title="Source Xref">Source Xref</a></li>
                  <li><a href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a></li>
                  <li><a href="surefire.html" title="Surefire">Surefire</a></li>
                  <li><a href="dependency-updates-aggregate-report.html" title="Dependency Updates Aggregate Report">Dependency Updates Aggregate Report</a></li>
                  <li><a href="dependency-updates-report.html" title="Dependency Updates Report">Dependency Updates Report</a></li>
                  <li><a href="plugin-updates-aggregate-report.html" title="Plugin Updates Aggregate Report">Plugin Updates Aggregate Report</a></li>
                  <li><a href="plugin-updates-report.html" title="Plugin Updates Report">Plugin Updates Report</a></li>
                  <li><a href="property-updates-aggregate-report.html" title="Property Updates Aggregate Report">Property Updates Aggregate Report</a></li>
                  <li><a href="property-updates-report.html" title="Property Updates Report">Property Updates Report</a></li>
                  <li><a href="dependency-check-report.html" title="dependency-check:aggregate">dependency-check:aggregate</a></li>
              </ul>
            </li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="oshi-core/index.html" title="oshi-core">oshi-core</a></li>
            <li><a href="oshi-demo/index.html" title="oshi-demo">oshi-demo</a></li>
            <li><a href="oshi-core-java11/index.html" title="oshi-core-java11">oshi-core-java11</a></li>
            <li><a href="oshi-dist/index.html" title="oshi-dist">oshi-dist</a></li>
        </ul>
      </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>Operating System and Hardware Information</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-09-16<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 6.6.5-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">User guide</li>
    <li><a href="index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="oshi-core-java11/apidocs/" title="Javadocs"><span class="none"></span>Javadocs</a></li>
    <li><a href="FAQ.html" title="Frequently Asked Questions"><span class="none"></span>Frequently Asked Questions</a></li>
    <li class="active"><a><span class="none"></span>Performance Considerations</a></li>
    <li><a href="Upgrading.html" title="Major Version Breaking Changes"><span class="none"></span>Major Version Breaking Changes</a></li>
    <li><a href="SampleOutput.html" title="Sample Output"><span class="none"></span>Sample Output</a></li>
   <li class="nav-header">GitHub</li>
    <li><a href="https://github.com/oshi/oshi" class="externalLink" title="OSHI on GitHub"><span class="none"></span>OSHI on GitHub</a></li>
    <li><a href="https://github.com/oshi/oshi/issues" class="externalLink" title="Issues"><span class="none"></span>Issues</a></li>
    <li><a href="https://github.com/oshi/oshi/releases" class="externalLink" title="Releases"><span class="none"></span>Releases</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="oshi-core/index.html" title="oshi-core"><span class="none"></span>oshi-core</a></li>
    <li><a href="oshi-demo/index.html" title="oshi-demo"><span class="none"></span>oshi-demo</a></li>
    <li><a href="oshi-core-java11/index.html" title="oshi-core-java11"><span class="none"></span>oshi-core-java11</a></li>
    <li><a href="oshi-dist/index.html" title="oshi-dist"><span class="none"></span>oshi-dist</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>OSHI Performance Considerations</h1><section>
<h2><a name="CPU.2Fmemory_trade-offs"></a>CPU/memory trade-offs</h2>
<p>OSHI avoids caching large amount of information, leaving caching to the user.  Limited use of caching is employed in many classes using Memoized suppliers in instance fields, thus avoiding repeated operating system calls.</p>
<p>Users with memory constraints can ensure the existing cached information is disposed of by using a new instance of <code>SystemInfo</code> and the subordinate classes when collecting data.</p></section><section>
<h2><a name="Updating_statistics_on_objects_in_a_list"></a>Updating statistics on objects in a list</h2>
<p>Many of the individual objects returned by lists, such as <code>OSProcess</code>, <code>NetworkIF</code>, <code>OSFileStore</code>, and others, have an <code>updateAttributes()</code> method that operates only on that object. These are intended for use primarily if that individual process is the only one being monitored/updated.  In many cases, the entire list must be queried to provide the information, so users updating multiple objects in a list should simply re-query the entire list once and then correlate the new set of results to the old ones in their own application.</p></section><section>
<h2><a name="Windows_performance_counters"></a>Windows performance counters</h2>
<p>OSHI attempts to read process and thread information from the registry base key HKEY_PERFORMANCE_DATA in preference to performance counters for performance reasons. This approach may cause problems with localization and can be disabled in the configuration file, or by calling <code>GlobalConfig.set(GlobalConfig.OSHI_OS_WINDOWS_HKEYPERFDATA, false);</code> shortly after startup (at least before querying process lists).</p>
<p>Some users may choose to disable performance counters in their registry for performance reasons (e.g., gaming). Log warnings when detecting these disabled counters can be confusing. If your application does not use any information from these classes of performance counters, you can suppress these log warnings by calling <code>GlobalConfig.set(GlobalConfig.OSHI_OS_WINDOWS_PERFOS_DISABLED, true);</code>, <code>GlobalConfig.set(GlobalConfig.OSHI_OS_WINDOWS_PERFPROC_DISABLED, true);</code>, and/or <code>GlobalConfig.set(GlobalConfig.OSHI_OS_WINDOWS_PERFDISK_DISABLED, true);</code>.</p></section><section>
<h2><a name="Windows_process_command_lines"></a>Windows process command lines</h2>
<p>On Windows, process command lines are only available in WMI and require a significant WMI overhead unless OSHI is running with elevated
permissions or the process is owned by the same user.</p>
<p>By default, command lines are not pre-fetched in <code>OSProcess</code> objects, and are populated by a single query for each process, assuming command line queries will be done ad-hoc by a user.</p>
<p>If your application requires updating more than a few command lines owned by other users, CPU performance can be significantly improved by fetching and caching the entire list of command line results. This must be enabled in the configuration file, or by calling <code>GlobalConfig.set(GlobalConfig.OSHI_OS_WINDOWS_COMMANDLINE_BATCH, true);</code> shortly after startup (at least before the first command line query).</p></section><section>
<h2><a name="Windows_suspended_processes"></a>Windows suspended processes</h2>
<p>On Windows, determining if a process is suspended requires querying the state of its threads.</p>
<p>By default, all Windows processes are presented as &#x201c;Running&#x201d;. If your application requires knowing which processes are suspended, collecting the thread details works best for ad hoc requests. To query all processes, it is more efficient (but still slow) to query thread performance counters. This must be enabled in the configuration file, or by calling <code>GlobalConfig.set(GlobalConfig.OSHI_OS_WINDOWS_PROCSTATE_SUSPENDED, true);</code> shortly after startup (at least before the first instantiation of the Operating System class).</p></section><section>
<h2><a name="Windows_WMI_query_COM_initialization"></a>Windows WMI query COM initialization</h2>
<p>Because OSHI does not know whether COM has been initialized externally, each WMI query requires initializing and uninitializing COM.  Each WMI query's response time can be improved by about 3 to 5 milliseconds by having your application do the necessary COM initialization and extending OSHI's <code>WmiQueryHandler</code> with a version that omits that overhead.  The <code>UserComInit</code> and <code>WmiNoComInitQueryHandler</code> classes in the <code>oshi-demo</code> artifact demonstrate this capability, and can be further customized.</p></section><section>
<h2><a name="Physical_device_latency"></a>Physical device latency</h2>
<p>Updates of statistics on disks, filestores, USB devices, and some network information may incur physical device or network latency and respond more slowly than other native calls.  Periodic polling for updates should generally be less frequent than OS-kernel based statistics such as CPU and memory. Also see the discussion above regarding disk performance counters; if only unchanging disk statistics are required then disabling the querying of PerfDisk counters will slightly improve performance.</p></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2010–2024
<a href="https://github.com/oshi/">oshi</a>
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>
